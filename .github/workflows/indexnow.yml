name: ğŸ” IndexNow - æ‰‹åŠ¨æäº¤é¦–é¡µ

on: 
  # åªæ”¯æŒæ‰‹åŠ¨è§¦å‘
  workflow_dispatch:
    inputs:
      notify_engines:
        description: 'è¦é€šçŸ¥çš„æœç´¢å¼•æ“'
        type: choice
        options:
          - bing_only
          - all_supported
        default: 'bing_only'
        required: true

jobs:
  notify-search-engines:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ• å¼€å§‹æäº¤
        run: |
          echo "========================================"
          echo "ğŸ” æœç´¢å¼•æ“æäº¤å·¥å…·"
          echo "========================================"
          echo "æäº¤æ—¶é—´: $(date)"
          echo "ç½‘ç«™: www.jfgadai.com"
          echo "é€šçŸ¥æ–¹å¼: ${{ github.event.inputs.notify_engines }}"
          echo "========================================"
          echo ""
      
      - name: ğŸš€ æäº¤åˆ° IndexNow (Bing + å…¶ä»–)
        if: github.event.inputs.notify_engines == 'all_supported'
        env:
          KEY: "964fa0042fac44648205cc02f45d4f05"
          LOCATION: "https://www.jfgadai.com/964fa0042fac44648205cc02f45d4f05.txt"
        run: |
          echo "ğŸ“¡ é€šè¿‡ IndexNow åè®®é€šçŸ¥æ‰€æœ‰æ”¯æŒçš„æœç´¢å¼•æ“:"
          echo "âœ… Bing"
          echo "âœ… Yandex" 
          echo "âœ… Seznam.cz"
          echo "âœ… Naver"
          echo ""
          
          curl -X POST "https://api.indexnow.org/indexnow" \
            -H "Content-Type: application/json; charset=utf-8" \
            -d '{
              "host": "www.jfgadai.com",
              "key": "'"$KEY"'",
              "keyLocation": "'"$LOCATION"'",
              "urlList": ["https://www.jfgadai.com/"]
            }'
          
          echo ""
          echo "âœ… å·²é€šè¿‡ IndexNow é€šçŸ¥æ‰€æœ‰æ”¯æŒçš„æœç´¢å¼•æ“"
      
      - name: ğŸ¯ åªæäº¤åˆ° Bing
        if: github.event.inputs.notify_engines == 'bing_only'
        env:
          KEY: "964fa0042fac44648205cc02f45d4f05"
          LOCATION: "https://www.jfgadai.com/964fa0042fac44648205cc02f45d4f05.txt"
        run: |
          echo "ğŸ¯ åªé€šçŸ¥ Bing æœç´¢å¼•æ“"
          echo ""
          
          # æ–¹æ³•1: é€šè¿‡ IndexNow (Bingä¼šæ”¶åˆ°)
          curl -X POST "https://api.indexnow.org/indexnow" \
            -H "Content-Type: application/json; charset=utf-8" \
            -d '{
              "host": "www.jfgadai.com",
              "key": "'"$KEY"'",
              "keyLocation": "'"$LOCATION"'",
              "urlList": ["https://www.jfgadai.com/"]
            }'
          
          echo ""
          echo "âœ… å·²é€šçŸ¥ Bing"
          echo "ğŸ’¡ IndexNow åè®®ä¼šè‡ªåŠ¨é€šçŸ¥å…¶ä»–æ”¯æŒçš„æœç´¢å¼•æ“"
      
      - name: ğŸ“Š æäº¤æŠ¥å‘Š
        run: |
          echo ""
          echo "========================================"
          echo "ğŸ“‹ æäº¤æŠ¥å‘Š"
          echo "========================================"
          echo "âœ… å®Œæˆæ—¶é—´: $(date)"
          echo "âœ… æäº¤é¡µé¢: https://www.jfgadai.com/"
          echo ""
          echo "ğŸ’¡ åç»­æ“ä½œ:"
          echo "1. æœç´¢å¼•æ“ä¼šåœ¨å‡ å°æ—¶å†…å¤„ç†"
          echo "2. å¯ä»¥è®¿é—® Bing Webmaster Tools æŸ¥çœ‹çŠ¶æ€"
          echo "3. ä¸‹æ¬¡æ›´æ–°ç½‘ç«™åå†æ‰‹åŠ¨è¿è¡Œæ­¤å·¥ä½œæµ"
          echo ""
          echo "ğŸ” æ£€æŸ¥æ”¶å½•:"
          echo "Bing: site:jfgadai.com"
          echo "Google: site:jfgadai.com"
          echo "========================================"
